# 信息隐藏技术实验九
> 李潇逸    2111454


## 实验要求
DCT域的信息隐藏包括：1. 修改系数方法；2. 系数比较方法。

以上两种方法任选一种，实现变换域中的信息隐藏与提取。


## 实验原理

### 变换域技术
在载体的显著区域隐藏信息，比 LSB 方法能够更好地抵抗攻击，而且保持了对人类感观的不可察觉性。常用的变换域方法：离散余弦变换 DCT，离散小波变换 DWT，离散傅里叶变换DFT。
二维 DCT 变换：图像分为 8x8 的像素块，进行二维 DCT 变换，得到 8x8 的 DCT 系数。最左上角的系数是直流系数其余是交流系数。左上角部分是直流和低频，右下角部分是高频，中间区域是中频。中低频系数包含了图像的大部分能量，是对人的视觉最重要的部分。

### 信息隐藏算法
以一定方式选择一些中频系数，在这些中频系数中叠加秘密信息：
算法一：在选出的中频系数中叠加秘密信息 x(i, j)’ = x(i, j) + a  mi
算法二：在选出的中频系数中叠加秘密信息 x(i, j)’ = x(i, j) (1 + am)
算法三：不需要原始载体，直接利用载体中两个特定数的相对大小来代表隐藏的信息。
算法四：算法三的扩展，利用 DCT 中频系数中的三个特定系数的相对关系来对秘密信息进行编码。

### 修改系数法
一般而言隐藏算法可以是修改系数的方法，也可以是系数比较的方法，为了方便起见我们实现前者。DCT 域修改的系数一般都是中频系数，我们可以在这些中频系数中叠加所需的秘密信息。其算法二原理为：在选中的中频系数中叠加秘密信息，成比例修改 DCT 系数。

$$ x'(i, j) = x(i, j) + a...m_i, α ∈ (0, 1) $$ 
其中，a 是可调参数，控制嵌入强度。与算法一相比，每个系数上嵌入的强度大小会有所不同，和原始系数比例相关。


## 实验代码
```matlab
% Pre-process images.
clc;
clear all;
close all;
img = (imread("C:\Users\19309\Desktop\document\信息隐藏技术\第九次实验\picture\genshin.png"));
watermark = imbinarize(imread("C:\Users\19309\Desktop\document\信息隐藏技术\第九次实验\picture\traveler.png"));
img = imresize(img, [256, 256]);
watermark = imresize(~watermark, [64,64]);

img = double(img)/256;
watermark = im2double(watermark);
size = 256; width = 4;

blocks = size / width;
new_image = zeros(size);
vec = ones(64);

for i = 1 : blocks
    for j = 1 : blocks
        x = (i - 1) * width + 1;
        y = (j - 1) * width + 1;
        cur = img(x:x+width-1, y:y+width-1);
        cur = dct2(cur);
        
        if watermark(i, j) == 0
            a = -1;
        else
            a = 1;
        end
        
        cur(1, 1) = cur(1, 1) * (1 + .01 * a) + .01 * a;
        cur = idct2(cur);
        new_image(x: x + width - 1, y : y + width - 1) = cur;
    end
end

for i = 1 : blocks
    for j = 1 : blocks
        x = (i - 1) * width + 1;
        y = (j - 1) * width + 1;
        
        if new_image(x, y) > img(x, y)
            vec(i, j) = 1;
        else
            vec(i, j) = 0;
        end
    end
end

subplot(231); imshow(img);title("原始图像");
subplot(232); imshow(watermark);title("水印图像");
subplot(233); imshow(imcomplement(watermark));title("反色之前的水印图像");
subplot(234); imshow(new_image,[]);title("嵌入水印");
subplot(235); imshow(vec,[]);title("提取图像");
subplot(236); imshow(imcomplement(vec),[]);title("提取图像后反色与原图对比");
```
首先将图片读入，之后将其修改为我们需要的大小；。然后对每一个区块进行操作，进行DCT变换，转换为频域，然后根据水印图像的值，对小块的
第一个系数进行微调，以嵌入水印信息。最后，使用 IDCT 变换将小块转换回空域，并将其存储到新的图像中。


## 实验结果
![alt text](<mdpicture/屏幕截图 2024-05-07 171848.png>)